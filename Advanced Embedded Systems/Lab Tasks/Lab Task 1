
#include <SPI.h>
#include <WiFiNINA.h>

char ssid[]     = "YOUR_SSID";      
char password[] = "YOUR_PASSWORD";  

WiFiServer server(80);              

void setup() {
  pinMode(LED_BUILTIN, OUTPUT);
  Serial.begin(9600);
  while (!Serial);                

  Serial.println("\nConnecting to WiFi â€¦");
  int status;
  while ((status = WiFi.begin(ssid, password)) != WL_CONNECTED) {
    Serial.print(".");
    delay(1000);
  }

  Serial.print("\nConnected!  IP address: ");
  Serial.println(WiFi.localIP());
  server.begin();
}

void loop() {
  WiFiClient client = server.available();
  if (!client) return;

  while (client.connected() && !client.available()) delay(1);
  String request = client.readStringUntil('\r');
  client.flush();


  if (request.indexOf("GET /on")  >= 0) digitalWrite(LED_BUILTIN, HIGH);
  if (request.indexOf("GET /off") >= 0) digitalWrite(LED_BUILTIN, LOW);

  
  client.println(F("HTTP/1.1 200 OK"));
  client.println(F("Content-Type: text/html"));
  client.println(F("Connection: close\r\n"));

  client.println(F("<!DOCTYPE html><html><head><meta charset='utf-8'>"
                   "<meta name='viewport' content='width=device-width,initial-scale=1'>"
                   "<title>LED Control</title></head><body>"
                   "<h2>Arduino Uno WiFi Rev 2 LED Control</h2>"));

  client.print(F("<p>LED is now <b>"));
  client.print(digitalRead(LED_BUILTIN) ? "ON" : "OFF");
  client.println(F("</b></p>"
                   "<a href='/on'><button style='padding:10px 20px;margin:4px;'>ON</button></a>"
                   "<a href='/off'><button style='padding:10px 20px;margin:4px;'>OFF</button></a>"
                   "</body></html>"));
  delay(1);                         // give the browser time
  client.stop();
}
